/**
 * JavaScript module for WhatsApp Messenger block.
 *
 * @package    block_whatsapp_messenger
 * @copyright  2024 CentricApp LTD (https://centricapp.co.il)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_whatsapp_messenger/messenger",["jquery","core/ajax","core/notification"],function($,Ajax,Notification){return{init:function(courseid){$("#whatsapp-message-form").on("submit",function(e){e.preventDefault(),e.stopPropagation();var recipient=$("#recipient-select").val(),message=$("#message-text").val();if(message.trim()){var $btn=$("#send-whatsapp-btn"),$status=$("#whatsapp-status");return $btn.prop("disabled",!0).text("Sending..."),$status.removeClass("alert-success alert-danger").text(""),Ajax.call([{methodname:"block_whatsapp_messenger_send_message",args:{courseid:courseid,recipient:parseInt(recipient),message:message},done:function(response){response.success?($status.addClass("alert alert-success").text(response.message),$("#message-text").val(""),Notification.addNotification({message:response.message,type:"success"})):($status.addClass("alert alert-danger").text(response.message),Notification.addNotification({message:response.message,type:"error"}))},fail:function(error){var errorMsg="Error sending message";error.message&&(errorMsg=error.message),$status.addClass("alert alert-danger").text(errorMsg),Notification.addNotification({message:errorMsg,type:"error"})},always:function(){$btn.prop("disabled",!1).text("Send Message")}}]),!1}Notification.addNotification({message:"Please enter a message",type:"error"})})}}});

//# sourceMappingURL=messenger.min.js.map